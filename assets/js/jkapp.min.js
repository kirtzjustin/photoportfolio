let app;require(["esri/config","esri/portal/Portal","esri/WebMap","esri/views/MapView","esri/views/SceneView","esri/widgets/Search","esri/widgets/BasemapGallery","esri/widgets/BasemapToggle","esri/widgets/LayerList","esri/widgets/CoordinateConversion","esri/widgets/Home","esri/widgets/Print","esri/widgets/Legend","esri/widgets/Track","esri/widgets/ScaleBar","esri/widgets/Bookmarks","esri/widgets/Popup","esri/widgets/Editor","esri/widgets/FeatureTable","esri/widgets/ElevationProfile","esri/core/reactiveUtils","esri/geometry/SpatialReference","esri/geometry/Point","esri/widgets/CoordinateConversion/support/Conversion","esri/widgets/CoordinateConversion/support/Format","esri/geometry/geometryEngine","esri/Graphic","esri/layers/GraphicsLayer","esri/widgets/DirectLineMeasurement3D","esri/widgets/AreaMeasurement3D","esri/widgets/DistanceMeasurement2D","esri/widgets/AreaMeasurement2D","esri/widgets/Sketch/SketchViewModel","esri/widgets/Sketch","esri/rest/geometryService","esri/rest/support/ProjectParameters","esri/widgets/Measurement"],function(e,t,a,i,o,p,n,l,r,s,u,c,d,y,g,m,v,w,h,b,S,B,V,f,W,M,L,k,E,T,C,P,I,q,D,x,O){function F(){app.bookmarksWidgetListItem=document.getElementById("bookmarksWidgetListItem"),app.bookmarksWidget3dWarningText=document.getElementsByClassName("esri-bookmarks__loader-container"),app.extentIndicator=document.getElementById("extentIndicator"),app.measureWidgetButtons2D=document.getElementById("measureWidgetButtons2D"),app.measureWidgetButtons3D=document.getElementById("measureWidgetButtons3D"),app.pointStyles=document.getElementById("sketchWidgetStylesPoint"),app.polylineStyles=document.getElementById("sketchWidgetStylesPolyline"),app.polygonStyles=document.getElementById("sketchWidgetStylesPolygon"),app.pointSymbolButtonColor=document.getElementById("colorSelectPoint"),app.pointSymbolButtonOpacity=document.getElementById("colorSelectPointAlpha"),app.pointSymbolButtonStyle=document.getElementById("pointStyleSelect"),app.pointSymbolButtonSize=document.getElementById("pointSizeSelect"),app.pointSymbolButtonOutlineColor=document.getElementById("outlineColorSelectPoint"),app.pointSymbolButtonOutlineColorOpacity=document.getElementById("outlineColorSelectPointAlpha"),app.pointSymbolButtonOutlineWidth=document.getElementById("outlineWidthSelectPoint"),app.polylineSymbolButtonColor=document.getElementById("colorSelectPolyline"),app.polylineSymbolButtonOpacity=document.getElementById("colorSelectPolylineAlpha"),app.polylineSymbolButtonStyle=document.getElementById("polylineStyleSelect"),app.polylineSymbolButtonWidth=document.getElementById("polylineWidthSelect"),app.polygonSymbolButtonColor=document.getElementById("colorSelectPolygon"),app.polygonSymbolButtonOpacity=document.getElementById("colorSelectPolygonAlpha"),app.polygonSymbolButtonStyle=document.getElementById("polygonStyleSelect"),app.polygonSymbolButtonOutlineColor=document.getElementById("outlineColorSelectPolygon"),app.polygonSymbolButtonOutlineColorOpacity=document.getElementById("outlineColorSelectPolygonAlpha"),app.polygonSymbolButtonOutlineWidth=document.getElementById("polygonOutlineWidthSelect"),app.printWidgetDiv=document.getElementById("printWidgetDiv"),app.chartDiv=document.getElementById("chartDiv"),app.queryingIndicatorContainer=document.getElementById("queryingIndicatorContainer"),app.queryMeasureContainerArea=document.getElementById("queryMeasureContainerArea"),app.queryMeasureContainerRadius=document.getElementById("queryMeasureContainerRadius"),app.queryTools=document.getElementById("queryTools"),app.clearHighlightedFeatures=document.getElementById("clearHighlightedFeatures"),app.zoomToExtentOfQueryPoly=document.getElementById("zoomToExtentOfQueryPoly"),app.screenshot3DButton=document.getElementById("screenshot3DButton"),app.screenshot3DSection=document.getElementById("screenshot3DSection"),app.screenshot3DDiv=document.getElementById("screenshot3DDiv"),app.overviewMapToggleBox=document.getElementById("overviewMapToggleBox"),app.elevationToggleDiv=document.getElementById("elevationToggleDiv"),app.clusterDiv=document.getElementById("clusterDiv"),app.elevationToggle=document.getElementById("elevationToggle"),app.filterToolSelectMenu=document.getElementById("filterToolSelectMenu"),app.filterToolSelectMenuLabel=document.getElementById("filterToolSelectMenuLabel"),app.coordinateConversionWarningText=document.getElementById("coordConversionWarning"),app.attributeTableLayerSelect=document.getElementById("layerSelectMenu"),app.bookmarksbutton=document.getElementById("bookmarksbutton"),app.printbutton=document.getElementById("printbutton"),app.appNavbar=document.getElementById("appNavbar")}function A(e,t){try{if("main"===t)return app.activeView.map.allLayers.find(function(t){return t.title===e});if("overview"===t)return app.overviewMapView.map.allLayers.find(function(t){return t.title===e});console.log('Error, please enter either "main" or "overview"')}catch(e){console.log("Error message findLayerByTitle: ",e.message)}}function G(e){return queryLayerViewStats(e).then(function(e){updateCharts(e,"canvasCount")})}function R(e){let t=[],a=e.features,i=a[0].layer.title,o=e.fields[0].name,p=a.map(function(e){return e.attributes[app.filterToolField]});return p.forEach(function(e){(t.length<1||-1===t.indexOf(e))&&""!==e&&t.push(e)}),t.push(""),app.filterToolSelectMenuLabel.innerHTML="Filter <i>"+i+"</i> By <i>"+o+"</i>",t}function N(e){let t;if(app.filterToolSelectMenu.options.length>0)for(t=app.filterToolSelectMenu.options.length-1;t>=0;t--)app.filterToolSelectMenu.remove(t);return e.sort(),e.forEach(function(e){let t=document.createElement("option");""===e?(t.text="No Filter",t.value="",app.filterToolSelectMenu.add(t)):(t.text=e,app.filterToolSelectMenu.add(t))}),z(app.filterToolSelectMenu.value)}function z(e){if(""===e)app.filterToolLayer.definitionExpression=null,app.filterToolLayerOverviewMap.definitionExpression=null;else try{app.filterToolLayer.definitionExpression=app.filterToolField+" = '"+e+"'",app.filterToolLayerOverviewMap.definitionExpression=app.filterToolField+" = '"+e+"'"}catch(e){console.log("Error message setFilterLayerDefinitionExpression: ",e.message)}}function H(e){let t,a,i;S.whenOnce(()=>app.activeView.ready).then(()=>{"3d"===app.activeView.type?e.style.visibility="hidden":"2d"===app.activeView.type&&0===app.activeView.rotation?("hidden"===e.style.visibility&&(e.style.visibility="visible"),t=app.activeView.extent,a=app.overviewMapView.toScreen(new V({x:t.xmin,y:t.ymin,spatialReference:t.spatialReference})),i=app.overviewMapView.toScreen(new V({x:t.xmax,y:t.ymax,spatialReference:t.spatialReference})),e.style.top=i.y+"px",e.style.left=a.x+"px",e.style.height=a.y-i.y+"px",e.style.width=i.x-a.x+"px"):"2d"===app.activeView.type&&"hidden"===e.style.visibility&&(e.style.visibility="visible")})}function Q(){S.whenOnce(()=>app.activeView.ready).then(()=>{"2d"===app.activeView.type?app.overviewMapView.goTo({center:app.activeView.center,scale:2*app.activeView.scale*Math.max(app.activeView.width/app.overviewMapView.width,app.activeView.height/app.overviewMapView.height),rotation:app.activeView.rotation},{duration:200,easing:"ease-out"}):app.overviewMapSceneView.goTo({center:app.activeView.center,heading:app.activeView.camera.heading,tilt:app.activeView.camera.tilt,scale:2.35*app.activeView.scale*Math.max(app.activeView.width/app.overviewMapSceneView.width,app.activeView.height/app.overviewMapSceneView.height)},{duration:750,easing:"ease-out"})})}function _(e){let t,a;switch(e){case"distance":app.measureWidget2D=new C({viewModel:{view:app.activeView}}),null===app.measureWidget2D.view&&(app.measureWidget2D.view=app.activeView),t=document.createElement("div"),app.measureWidget2D.container=t,document.getElementById("measureOutput2D").appendChild(t),$(document.getElementById("drawPolygon"));break;case"area":app.measureWidget2D=new P({viewModel:{view:app.activeView}}),a=document.createElement("div"),app.measureWidget2D.container=a,document.getElementById("measureOutput2D").appendChild(a);break;case null:app.measureWidget2D&&(app.activeView.ui.remove(app.measureWidget2D),app.measureWidget2D.destroy())}}function $(e){app.activeView.focus();let t,a=document.getElementsByClassName("active");for(t=0;t<a.length;t++)"drawPolygon"===a[t].id?a[t].classList.remove("active"):"drawPolyline"===a[t].id&&a[t].classList.remove("active");e&&e.classList.add("active")}function j(){let e=document.getElementById("drawPolyline");e.removeEventListener("click",app.eventListener2DMeasureWidgetDistance),app.eventListener2DMeasureWidgetDistance=function(){return _(null),this.classList.contains("active")?$(null):_("distance")},e.addEventListener("click",app.eventListener2DMeasureWidgetDistance)}function U(){let e=document.getElementById("drawPolygon");e.removeEventListener("click",app.eventListener2DMeasureWidgetArea),app.eventListener2DMeasureWidgetArea=function(){_(null),this.classList.contains("active")?$(null):_("area")},e.addEventListener("click",app.eventListener2DMeasureWidgetArea)}function X(e){let t,a;switch(e){case"distance":app.measureWidget3D=new E({view:app.activeView,unit:"imperial"}),null===app.measureWidget3D.view&&(app.measureWidget3D.view=app.activeView),t=document.createElement("div"),app.measureWidget3D.container=t,document.getElementById("measureOutput3D").appendChild(t),Y(document.getElementById("distanceButton"));break;case"area":app.measureWidget3D=new T({view:app.activeView,unit:"imperial"}),a=document.createElement("div"),app.measureWidget3D.container=a,document.getElementById("measureOutput3D").appendChild(a),Y(document.getElementById("areaButton"));break;case null:app.measureWidget3D&&(app.activeView.ui.remove(app.measureWidget3D),app.measureWidget3D.destroy())}}function Y(e){app.activeView.focus();let t,a=document.getElementsByClassName("active");for(t=0;t<a.length;t++)"areaButton"===a[t].id?a[t].classList.remove("active"):"distanceButton"===a[t].id&&a[t].classList.remove("active");e&&e.classList.add("active")}function Z(){let e=document.getElementById("distanceButton");e.removeEventListener("click",app.eventListener3DMeasureWidgetDistance),app.eventListener3DMeasureWidgetDistance=function(){return X(null),this.classList.contains("active")?Y(null):X("distance")},e.addEventListener("click",app.eventListener3DMeasureWidgetDistance)}function J(){let e=document.getElementById("areaButton");e.removeEventListener("click",app.eventListener3DMeasureWidgetArea),app.eventListener3DMeasureWidgetArea=function(){X(null),this.classList.contains("active")?Y(null):X("area")},e.addEventListener("click",app.eventListener3DMeasureWidgetArea)}function K(e,t){let a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return a=e.substring(1).split(""),3==a.length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),a="0x"+a.join(""),"rgba("+[a>>16&255,a>>8&255,255&a].join(",")+","+t+")";throw new Error("Bad Hex")}function ee(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function te(e){app.activeView=e}function ae(){const e="3d"===app.activeView.type,t=app.activeView.viewpoint.clone();app.activeView.container=null,e?(app.mapView.viewpoint=t,app.mapView.container="mapViewDiv",app.activeView=app.mapView,app.overviewMapSceneView.container=null,app.overviewMap.container="overviewMap",app.overviewMap.popup=null,app.switchButton.icon="globe",app.switchButton.text="Toggle Map To 3D View",app.switchButton.title="Toggle Map To 3D View",S.whenOnce(()=>app.activeView.ready).then(()=>{try{app.legend.view=app.activeView,app.basemapGallery.view=app.activeView,app.searchWidgetNav.view=app.activeView,app.scaleBar.view=app.activeView,app.track.view=app.activeView,app.home.view=app.activeView,app.coordinateConversion.view=app.activeView,app.sketchWidgetSketchViewModel.view=app.activeView,app.sketchWidget.view=app.activeView,app.querySketchWidget.view=app.activeView,app.elevationProfileWidget.view=app.activeView,app.layerList.view=app.activeView,app.home.viewpoint=app.defaultHomeViewPoint,app.printWidget.view=app.activeView,app.measureWidgetButtons2D.classList.remove("hidden"),app.measureWidgetButtons3D.classList.add("hidden"),app.bookmarksbutton.classList.remove("hidden"),app.printbutton.classList.remove("hidden"),app.activeView.whenLayerView(app.queryLayer).then(function(e){app.queryLayerView=e})}catch(e){console.log("Error message: ",e.message)}}).then(function(){app.activeView.watch("extent",()=>H(extentIndicator)),app.overviewMapView.watch("extent",()=>H(extentIndicator))}).then(function(){S.when(()=>app.activeView.stationary,Q)}),app.activeView.ui.add([{component:app.searchWidgetNav,position:"top-right"},{component:app.home,position:"top-right"},{component:app.track,position:"top-right"},{component:app.scaleBar,position:"bottom-right"}]),app.activeView.ui.move("compass","top-right"),app.activeView.ui.move("zoom","top-right")):(app.sceneView.viewpoint=t,app.sceneView.container="mapViewDiv",app.activeView=app.sceneView,app.activeView.map.ground="world-elevation",app.overviewMapSceneView.map.ground="world-elevation",app.overviewMap.container=null,app.overviewMapSceneView.container="overviewMap",app.overviewMapSceneView.popup=null,app.switchButton.icon="map",app.switchButton.text="Toggle Map To 2D View",app.switchButton.title="Toggle Map To 2D View",S.whenOnce(()=>app.activeView.ready).then(()=>{try{app.legend.view=app.activeView,app.basemapGallery.view=app.activeView,app.searchWidgetNav.view=app.activeView,app.track.view=app.activeView,app.home.view=app.activeView,app.coordinateConversion.view=app.activeView,app.sketchWidgetSketchViewModel.view=app.activeView,app.sketchWidget.view=app.activeView,app.querySketchWidget.view=app.activeView,app.elevationProfileWidget.view=app.activeView,app.layerList.view=app.activeView,app.measureWidgetButtons2D.classList.add("hidden"),app.measureWidgetButtons3D.classList.remove("hidden"),app.home.viewpoint=app.defaultHomeViewPoint,app.bookmarksbutton.classList.add("hidden"),app.printbutton.classList.add("hidden"),Z(),J(),app.activeView.whenLayerView(app.queryLayer).then(function(e){app.queryLayerView=e})}catch(e){console.log("Error message sdf: ",e.message)}}).then(function(){app.activeView.watch("extent",()=>H(extentIndicator)),app.overviewMapView.watch("extent",()=>H(extentIndicator))}).then(function(){S.when(()=>app.activeView.stationary,Q)}),app.activeView.ui.add([{component:app.searchWidgetNav,position:"top-right"},{component:app.home,position:"top-right"},{component:app.track,position:"top-right"}]),app.activeView.ui.move("compass","top-right"),app.activeView.ui.move("zoom","top-right"),app.overviewMapSceneView.ui.add(app.overviewMapBasemapToggleSceneView,"top-right"))}app={basemap:"satellite",viewPadding:{top:10,bottom:0},uiPadding:{top:15,bottom:15},map:null,overviewMap:null,overviewMapView:null,overviewMapSceneView:null,overviewMapBasemapToggle:null,overviewMapBasemapToggleSceneView:null,overviewMapScaleBar:null,extentIndicator:null,overviewMapToggleBox:null,mapView:null,sceneView:null,activeView:null,searchWidgetNav:null,containerMap:"mapViewDiv",containerScene:"sceneViewDiv",home:null,defaultHomeViewPoint:null,track:null,scaleBar:null,basemapGallery:null,legend:null,layerList:null,bookmarksWidget:null,bookmarksWidgetListItem:null,addCustomBookmark:null,bookmarksWidget3dWarningText:null,bookmarkCounter:1,coordinateConversion:null,newCoordFormat:null,coordinateConversionSearchPattern:/-?\d+[\.]?\d*/,measureWidget2D:null,measureWidget3D:null,eventListener2DMeasureWidgetDistance:null,eventListener2DMeasureWidgetArea:null,eventListener3DMeasureWidgetDistance:null,eventListener3DMeasureWidgetArea:null,measureWidgetButtons2D:null,measureWidgetButtons3D:null,sketchWidget:null,sketchWidgetGraphicsLayer:null,sketchWidgetSketchViewModel:null,sketchWidgetPointSymbol:null,sketchWidgetPolylineSymbol:null,sketchWidgetPolygonSymbol:null,pointStyles:null,polylineStyles:null,polygonStyles:null,pointSymbolButtonColor:null,pointSymbolButtonOpacity:null,pointSymbolButtonStyle:null,pointSymbolButtonSize:null,pointSymbolButtonOutlineColor:null,pointSymbolButtonOutlineColorOpacity:null,pointSymbolButtonOutlineWidth:null,polylineSymbolButtonColor:null,polylineSymbolButtonOpacity:null,polylineSymbolButtonStyle:null,polylineSymbolButtonWidth:null,polygonSymbolButtonColor:null,polygonSymbolButtonOpacity:null,polygonSymbolButtonStyle:null,polygonSymbolButtonOutlineColor:null,polygonSymbolButtonOutlineColorOpacity:null,polygonSymbolButtonOutlineWidth:null,pointSymbolButtonColorValue:null,pointSymbolButtonStyleValue:null,pointSymbolButtonSizeValue:null,pointSymbolButtonOutlineColorValue:null,pointSymbolButtonOutlineWidthValue:null,polylineSymbolButtonColorValue:null,polylineSymbolButtonStyleValue:null,polylineSymbolButtonWidthValue:null,polygonSymbolButtonColorValue:null,polygonSymbolButtonStyleValue:null,polygonSymbolButtonOutlineColorValue:null,polygonSymbolButtonOutlineWidthValue:null,printWidget:null,printWidgetDiv:null,selectedTableFeature:null,queryGraphicsLayer:null,querySketchWidget:null,queryPoint:null,queryPolyline:null,queryPolygon:null,querySketchViewModel:null,queryLayer:null,queryLayerView:null,queryTools:null,activeQueryPolygonButton:null,highlightedFeature:null,statsTable:null,queryMeasureArea:null,queryMeasureRadius:null,queryMeasureContainerArea:null,queryMeasureContainerRadius:null,queryingIndicatorContainer:null,clearHighlightedFeatures:null,zoomToExtentOfQueryPoly:null,squaredSymbol:"2".sup(),chartCount:null,bookmarksWidgetListItem:null,screenshot3DButton:null,screenshotBtn11X17:null,screenshot3DSection:null,screenshot3DDiv:null,smartPhonesPortrait:null,smartPhonesLandscape:null,ipadPro125Landscape:null,ipadPro125Portrait:null,ipadPro105Landscape:null,ipadPro105Portrait:null,ipad3497:null,ipad12MiniAir:null,elevationToggleDiv:null,elevationToggle:null,appNavbar:null,filterToolLayer:null,filterToolLayerOverviewMap:null,filterToolSelectMenu:null,filterToolSelectMenuLabel:null,filterToolField:null,coordinateConversionWarningText:null,clusterPointLayer:null,clusterPointLayerOverview:null,clusterPointLayer_clusterSettings:null,clusterDiv:null,attributeTableLayerSelect:null,attributeTable:null,attributeTableLayer:null,attributeTableFieldConfig:[],highlights:[],elevationProfileContainer:null,elevationProfileWidget:null,elevationProfileButton:null,activeWidget:null,nextWidget:null,switchButton:null,bookmarksbutton:null,printbutton:null,panelExpanded:!1},app.elevationProfileButton=document.getElementById("elevationProfileButton"),app.sketchWidgetGraphicsLayer=new k({id:"sketchWidgetGraphicsLayer"}),app.sketchWidgetGraphicsLayer.listMode="hide",app.queryGraphicsLayer=new k,app.queryGraphicsLayer.listMode="hide",app.selectedTableFeature=new L({symbol:{type:"simple-marker",style:"square",color:[255,255,255,0],size:"16px",outline:{color:"yellow",width:2}}}),app.map=new a({portalItem:{id:"468d2a89a3924ecc818a45cc8b568806"},layers:[app.sketchWidgetGraphicsLayer,app.queryGraphicsLayer],ground:"world-elevation"}),app.overviewMap=new a({portalItem:{id:"999ee72372284bf3926846a726e38b5f"}}),app.overviewMap.popup=null,app.overviewMapView=new i({container:"overviewMap",map:app.overviewMap,constraints:{rotationEnabled:!1},ui:{components:[],padding:app.uiPadding}}),app.overviewMapSceneView=new o({container:null,map:app.overviewMap,ui:{components:[],padding:app.uiPadding}}),app.overviewMapBasemapToggle=new l({view:app.overviewMapView,nextBasemap:"streets-vector"}),app.overviewMapBasemapToggleSceneView=new l({view:app.overviewMapSceneView,nextBasemap:"streets-vector"}),app.overviewMapView.ui.add(app.overviewMapBasemapToggle,"top-right"),app.overviewMapScaleBar=new g({view:app.overviewMapView,style:"ruler"}),app.overviewMapView.ui.add(app.overviewMapScaleBar,"bottom-left"),app.mapView=new i({container:"mapViewDiv",map:app.map,padding:app.viewPadding,ui:{components:["zoom","compass","attribution"],padding:app.uiPadding},popup:{dockEnabled:!0,dockOptions:{position:"bottom-right",breakpoint:{width:600,height:1e3}}}}),app.sceneView=new o({container:null,map:app.map,padding:app.viewPadding,ui:{padding:app.uiPadding},popup:{dockEnabled:!0,dockOptions:{position:"bottom-right",breakpoint:{width:600,height:1e3}}}}),te(app.mapView),app.searchWidgetNav=new p({container:"searchNavDiv"}),app.newCoordFormat=new W({name:"SC STATE PLANE",conversionInfo:{spatialReference:new B({wkid:102733}),reverseConvert:function(e,t){let a=e.split(",");return new V({x:parseFloat(a[0]),y:parseFloat(a[1]),spatialReference:{wkid:102733}})}},coordinateSegments:[{alias:"X",description:"easting",searchPattern:app.coordinateConversionSearchPattern},{alias:"Y",description:"northing",searchPattern:app.coordinateConversionSearchPattern}],defaultPattern:"X, Y"}),app.sketchWidgetPointSymbol={type:"simple-marker",style:"circle",color:"rgb(0,120,140)",size:"12px",outline:{color:[29,17,96],width:1}},app.sketchWidgetPolylineSymbol={type:"simple-line",color:"rgb(0,133,202)",width:"5",style:"solid"},app.sketchWidgetPolygonSymbol={type:"simple-fill",color:"rgba(187, 0, 0, 0.65)",style:"solid",outline:{color:[102,102,102],width:1}},app.switchButton=document.getElementById("switchbutton"),app.switchButton.addEventListener("click",function(){ae()}),app.home=new u({}),app.track=new y({}),app.scaleBar=new g({style:"ruler"}),app.basemapGallery=new n({container:"basemapGallery"}),app.legend=new d({container:"legendDiv",style:"classic"}),app.layerList=new r({container:"layerListDiv"}),app.bookmarksWidget=new m({container:"bookmarksDiv"}),app.coordinateConversion=new s({container:"coordinateConversionDiv"}),app.sketchWidgetSketchViewModel=new I({layer:app.sketchWidgetGraphicsLayer,pointSymbol:app.sketchWidgetPointSymbol,polylineSymbol:app.sketchWidgetPolylineSymbol,polygonSymbol:app.sketchWidgetPolygonSymbol}),app.sketchWidget=new q({container:"sketchWidgetButtons",id:"sketchWidget",viewModel:app.sketchWidgetSketchViewModel}),app.printWidget=new c({printServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Utilities/PrintingTools/GPServer/Export%20Web%20Map%20Task"}),app.querySketchWidget=new q({creationMode:"single"}),app.queryPoint={type:"simple-marker",style:"circle",color:"rgb(23, 43, 94)",size:"8px",outline:{color:[0,138,80],width:1}},app.queryPolyline={type:"simple-line",color:"red",width:"3.5",style:"dash"},app.queryPolygon={type:"simple-fill",color:"rgba(51, 51, 51, 0.5)",style:"solid",outline:{color:"red",width:3.5}},app.elevationProfileContainer=document.getElementById("eleProfilePanelBody"),app.elevationProfileWidget=new b({container:app.elevationProfileContainer,profiles:[{type:"ground",color:"red",title:"World Elevation"}]}),S.whenOnce(()=>app.activeView.ready).then(()=>{F(),app.home.view=app.activeView,app.track.view=app.activeView,app.scaleBar.view=app.activeView,app.sketchWidgetSketchViewModel.view=app.activeView,app.sketchWidget.view=app.activeView,app.printWidget.view=app.activeView,app.searchWidgetNav.view=app.activeView,app.activeView.ui.add([{component:app.searchWidgetNav,position:"top-right"},{component:app.home,position:"top-right"},{component:app.track,position:"top-right"},{component:app.scaleBar,position:"bottom-right"}]),app.activeView.ui.move("compass","top-right"),app.activeView.ui.move("zoom","top-right"),app.basemapGallery.view=app.activeView,app.basemapGallery.watch("activeBasemap",function(e){try{"Imagery with Labels"===e.title||"Imagery"===e.title||"Imagery Hybrid"===e.title||"Firefly Imagery Hybrid"===e.title||"NAIP Imagery Hybrid"===e.title?(app.overviewMap.basemap="streets-vector",app.overviewMapBasemapToggle.nextBasemap="hybrid"):(app.overviewMap.basemap="hybrid",app.overviewMapBasemapToggle.nextBasemap="streets-vector")}catch(e){console.log("Error message: ",e.message)}}),app.legend.view=app.activeView,app.bookmarksWidget.view=app.activeView,app.bookmarksWidget.visibleElements.addBookmarkButton=!0,app.bookmarksWidget.visibleElements.editBookmarkButton=!0,app.coordinateConversion.view=app.activeView,app.coordinateConversion.formats.add(app.newCoordFormat),app.coordinateConversion.conversions.splice(0,0,new f({format:app.newCoordFormat})),app.coordinateConversion.watch("mode",function(e,t,a,i){"capture"===e?(app.activeView.popup=null,app.coordinateConversionWarningText.classList.remove("hidden")):(app.coordinateConversionWarningText.classList.add("hidden"),app.activeView.popup=new v({dockEnabled:!0,dockOptions:{position:"bottom-right",breakpoint:{width:600,height:1e3}}}))}),app.layerList.view=app.activeView,app.layerList.listItemCreatedFunction=function(e){let t=e.item;t.view=app.activeView,t.panel||(t.panel={content:"legend",open:!1}),t.actionsSections=[[{title:"Increase Layer Opacity",className:"esri-icon-up",id:"increase-opacity"},{title:"Decrease Layer Opacity",className:"esri-icon-down",id:"decrease-opacity"},{title:"Zoom To Layer's Full Extent",className:"esri-icon-zoom-out-fixed",id:"full-extent"}]]},app.layerList.on("trigger-action",function(e){let t=e.item.layer,a=e.action.id;if("increase-opacity"===a)t.opacity<1&&(t.opacity+=.25);else if("decrease-opacity"===a)t.opacity>0&&(t.opacity-=.25);else if("full-extent"===a)if(t.fullExtent.spatialReference!==app.activeView.spatialReference){var i=new D({url:"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer"}),o=new x({geometries:[t.fullExtent],outSpatialReference:app.activeView.spatialReference});i.project(o).then(function(e){app.activeView.goTo(e[0])})}else app.activeView.goTo(t.fullExtent)}),app.defaultHomeViewPoint=(()=>app.mapView.viewpoint.clone())(),app.printWidget.container=app.printWidgetDiv,j(),U(),S.watch(()=>app.sketchWidget.activeTool,(e,t)=>{let a,i,o,p,n;switch(app.pointSymbolButtonColorValue=K(app.pointSymbolButtonColor.value,app.pointSymbolButtonOpacity.value),app.pointSymbolButtonStyleValue=app.pointSymbolButtonStyle.options[app.pointSymbolButtonStyle.selectedIndex].value,app.pointSymbolButtonSizeValue=app.pointSymbolButtonSize.options[app.pointSymbolButtonSize.selectedIndex].value,app.pointSymbolButtonOutlineColorValue=K(app.pointSymbolButtonOutlineColor.value,app.pointSymbolButtonOutlineColorOpacity.value),app.pointSymbolButtonOutlineWidthValue=parseInt(app.pointSymbolButtonOutlineWidth.options[app.pointSymbolButtonOutlineWidth.selectedIndex].value),app.polylineSymbolButtonColorValue=K(app.polylineSymbolButtonColor.value,app.polylineSymbolButtonOpacity.value),app.polylineSymbolButtonStyleValue=app.polylineSymbolButtonStyle.options[app.polylineSymbolButtonStyle.selectedIndex].value,app.polylineSymbolButtonWidthValue=parseInt(app.polylineSymbolButtonWidth.options[app.polylineSymbolButtonWidth.selectedIndex].value),app.polygonSymbolButtonColorValue=K(app.polygonSymbolButtonColor.value,app.polygonSymbolButtonOpacity.value),app.polygonSymbolButtonStyleValue=app.polygonSymbolButtonStyle.options[app.polygonSymbolButtonStyle.selectedIndex].value,app.polygonSymbolButtonOutlineColorValue=K(app.polygonSymbolButtonOutlineColor.value,app.polygonSymbolButtonOutlineColorOpacity.value),app.polygonSymbolButtonOutlineWidthValue=parseInt(app.polygonSymbolButtonOutlineWidth.options[app.polygonSymbolButtonOutlineWidth.selectedIndex].value),e){case"point":a=app.sketchWidget.viewModel.pointSymbol.clone(),a.color=app.pointSymbolButtonColorValue,a.outline.color=app.pointSymbolButtonOutlineColorValue,a.style=app.pointSymbolButtonStyleValue,a.size=app.pointSymbolButtonSizeValue,a.outline.width=app.pointSymbolButtonOutlineWidthValue,app.sketchWidget.viewModel.pointSymbol=a,app.pointStyles.classList.remove("hidden"),app.polylineStyles.classList.add("hidden"),app.polygonStyles.classList.add("hidden");break;case"polyline":i=app.sketchWidget.viewModel.polylineSymbol.clone(),i.color=app.polylineSymbolButtonColorValue,i.style=app.polylineSymbolButtonStyleValue,i.width=app.polylineSymbolButtonWidthValue,app.sketchWidget.viewModel.polylineSymbol=i,app.pointStyles.classList.add("hidden"),app.polylineStyles.classList.remove("hidden"),app.polygonStyles.classList.add("hidden");break;case"polygon":o=app.sketchWidget.viewModel.polygonSymbol.clone(),o.color=app.polygonSymbolButtonColorValue,o.outline.color=app.polygonSymbolButtonOutlineColorValue,o.style=app.polygonSymbolButtonStyleValue,o.outline.width=app.polygonSymbolButtonOutlineWidthValue,app.sketchWidget.viewModel.polygonSymbol=o,app.pointStyles.classList.add("hidden"),app.polylineStyles.classList.add("hidden"),app.polygonStyles.classList.remove("hidden");break;case"rectangle":p=app.sketchWidget.viewModel.polygonSymbol.clone(),p.color=app.polygonSymbolButtonColorValue,p.outline.color=app.polygonSymbolButtonOutlineColorValue,p.style=app.polygonSymbolButtonStyleValue,p.outline.width=app.polygonSymbolButtonOutlineWidthValue,app.sketchWidget.viewModel.polygonSymbol=p,app.pointStyles.classList.add("hidden"),app.polylineStyles.classList.add("hidden"),app.polygonStyles.classList.remove("hidden");break;case"circle":n=app.sketchWidget.viewModel.polygonSymbol.clone(),n.color=app.polygonSymbolButtonColorValue,n.outline.color=app.polygonSymbolButtonOutlineColorValue,n.style=app.polygonSymbolButtonStyleValue,n.outline.width=app.polygonSymbolButtonOutlineWidthValue,app.sketchWidget.viewModel.polygonSymbol=n,app.pointStyles.classList.add("hidden"),app.polylineStyles.classList.add("hidden"),app.polygonStyles.classList.remove("hidden")}}),app.elevationProfileWidget.view=app.activeView,app.map.layers.reorder(app.queryGraphicsLayer,app.map.layers.items.length-1),app.map.layers.reorder(app.sketchWidget_graphicsLayer,app.map.layers.items.length),app.appNavbar.addEventListener("calciteActionBarToggle",e=>{app.panelExpanded=!app.panelExpanded}),app.querySketchViewModel=new I({view:app.activeView,layer:app.queryGraphicsLayer,polygonSymbol:app.queryPolygon,pointSymbol:app.queryPoint,polylineSymbol:app.queryPolyline}),app.querySketchWidget.view=app.activeView,app.querySketchWidget.viewModel=app.querySketchViewModel,app.querySketchWidget.container="geometryQueryButtons",app.querySketchWidget.id="geometryquerybuttons_sketchWidget",app.querySketchWidget.availableCreateTools=["polygon","rectangle","circle"],app.queryLayer=A("My Travel Locations","main"),app.queryLayer.outFields=["*"],app.activeView.whenLayerView(app.queryLayer).then(function(e){app.queryLayerView=e,app.querySketchWidget.on("create",function(t){try{app.queryPolygon=t.graphic.geometry,app.activeQueryPolygonButton=t.tool}catch(e){console.log("stats widget error message: ",e.message)}if("active"===t.state){try{app.queryGraphicsLayer.removeAll(),app.highlightedFeature&&app.highlightedFeature.remove(),app.statsTable.clearData()}catch(e){console.log("querySketchWidget error: ",e.message)}if(app.queryMeasureArea=M.geodesicArea(app.queryPolygon,"square-feet"),app.queryMeasureArea<0){let e=M.simplify(app.queryPolygon);e&&(app.queryMeasureArea=M.geodesicArea(e,"square-feet"))}"circle"===t.tool?app.queryMeasureRadius=Math.sqrt(app.queryMeasureArea/Math.PI):app.queryMeasureRadius=0,app.queryMeasureContainerArea.innerHTML=ee(app.queryMeasureArea.toFixed(2))+" ft"+app.squaredSymbol,app.queryMeasureContainerRadius.innerHTML=ee(app.queryMeasureRadius.toFixed(2))+" ft"}else"complete"===t.state&&(app.queryingIndicatorContainer.classList.remove("noVisibility"),G(app.queryPolygon),app.queryLayer.queryFeatures({geometry:app.queryPolygon,outFields:["*"],outSpatialReference:app.activeView.spatialReference,returnGeometry:!0}).then(function(t){let a=t.features;app.highlightedFeature&&app.highlightedFeature.remove(),app.highlightedFeature=e.highlight(a),app.activeView.padding={left:app.panelExpanded?950:750},app.activeView.goTo(app.queryPolygon.extent.expand(2))}))}),app.querySketchWidget.on("update",function(t){let a=t.graphics[0].geometry;if("start"===t.state&&null===t.toolEventInfo)app.activeView.popup=null,app.activeView.popup=new v({dockEnabled:!0,dockOptions:{position:"bottom-right",breakpoint:{width:600,height:1e3}}
});else if("active"!==t.state||"scale"!==t.toolEventInfo.type&&"reshape"!==t.toolEventInfo.type)if("active"!==t.state||"move-stop"!==t.toolEventInfo.type&&"scale-stop"!==t.toolEventInfo.type&&"reshape-stop"!==t.toolEventInfo.type&&"rotate-stop"!==t.toolEventInfo.type){if("aborted"===t.state||"complete"===t.state)try{app.activeView.popup=new v({dockEnabled:!0,dockOptions:{position:"bottom-right",breakpoint:{width:600,height:1e3}}})}catch(e){console.log("Error recreating popup: ",e.message)}}else app.queryingIndicatorContainer.classList.remove("noVisibility"),G(a),app.queryLayer.queryFeatures({geometry:a,outFields:["*"],outSpatialReference:app.activeView.spatialReference,returnGeometry:!0}).then(function(t){let i=t.features;app.highlightedFeature&&app.highlightedFeature.remove(),app.highlightedFeature=e.highlight(i),app.activeView.goTo(a.extent.expand(2))});else{if(app.queryMeasureArea=M.geodesicArea(a,"square-feet"),app.queryMeasureArea<0){let e=M.simplify(a);e&&(app.queryMeasureArea=M.geodesicArea(e,"square-feet"))}"circle"===app.activeQueryPolygonButton?app.queryMeasureRadius=Math.sqrt(app.queryMeasureArea/Math.PI):app.queryMeasureRadius=0,app.queryMeasureContainerArea.innerHTML=ee(app.queryMeasureArea.toFixed(2))+" ft"+app.squaredSymbol,app.queryMeasureContainerRadius.innerHTML=ee(app.queryMeasureRadius.toFixed(2))+" ft"}})}),app.clearHighlightedFeatures.addEventListener("click",function(){try{app.queryGraphicsLayer.removeAll(),app.highlightedFeature.remove(),app.statsTable.clearData(),app.queryPolygon=null,app.activeView.padding.left=0}catch(e){console.log("clearHighlightedFeatures Error: ",e.message)}}),app.zoomToExtentOfQueryPoly.addEventListener("click",function(){try{app.activeView.goTo(app.queryPolygon.extent)}catch(e){console.log("zoomToExtentOfQueryPoly error: ",e.message)}}),app.filterToolLayer=A("My Favorite Photos","main"),app.filterToolLayerOverviewMap=A("My Favorite Photos","overview"),app.filterToolField="takenwith",app.filterToolLayer.when(function(){let e=app.filterToolLayer.createQuery();return e.outFields=[app.filterToolField],app.filterToolLayer.queryFeatures(e)}).then(R).then(N),app.filterToolSelectMenu.addEventListener("change",function(){let e=event.target.value;z(e)}),app.clusterPointLayer=A("My Travel Locations","main"),app.clusterPointLayerOverview=A("My Travel Locations","overview"),app.clusterPointLayer_clusterSettings={type:"cluster",clusterRadius:"20",popupTemplate:{title:"Cluster of {cluster_count} "+app.clusterPointLayer.title,content:"Cluster represents {cluster_count} "+app.clusterPointLayer.title}};for(let e=0;e<app.activeView.map.layers.items.length;e++)if("feature"===app.activeView.map.layers.items[e].type){let t=document.createElement("option");t.text=app.activeView.map.layers.items[e].title,t.value=app.activeView.map.layers.items[e].title,app.attributeTableLayerSelect.add(t)}let e=document.createElement("option");e.text="",e.value="",e.selected=!0,app.attributeTableLayerSelect.add(e),app.attributeTableLayerSelect.addEventListener("change",function(){let e=event.target.value;app.attributeTableLayer=A(e,"main");try{app.attributeTableFieldConfig.length>0&&(app.attributeTableFieldConfig=[]);for(let e=0;e<app.attributeTableLayer.fields.length;e++)app.attributeTableFieldConfig.push({name:app.attributeTableLayer.fields[e].name,label:app.attributeTableLayer.fields[e].name});if(app.attributeTable){app.attributeTable.destroy();let e=document.getElementById("attributeTablePanelBody"),t=document.createElement("div");t.id="attributeTable",e.appendChild(t)}app.attributeTable=new h({layer:app.attributeTableLayer,fieldConfigs:app.attributeTableFieldConfig,container:document.getElementById("attributeTable"),view:app.activeView}),app.activeView.whenLayerView(app.attributeTableLayer).then(function(e){app.attributeTable.on("selection-change",function(t){t.removed.forEach(function(e){const t=app.highlights.find(function(t){return t.feature===e.feature});t&&(app.highlights.splice(app.highlights.indexOf(t),1),t.highlight.remove())}),t.added.forEach(function(t){const a=t.feature;highlight=e.highlight(t.feature),app.highlights.push({feature:a,highlight:highlight})})})})}catch(e){console.log("Error Message: Attribute Table: ",e.mesage)}})}).then(function(){app.activeView.watch("extent",()=>H(app.extentIndicator)),app.overviewMapView.watch("extent",()=>H(app.extentIndicator))}).then(function(){S.when(()=>app.activeView.stationary,()=>{Q()})}),app.map.when(()=>{const e=({target:e})=>{try{if("CALCITE-ACTION"!==e.tagName)return;app.activeWidget&&(document.querySelector(`[data-action-id=${app.activeWidget}]`).active=!1,document.querySelector(`[data-panel-id=${app.activeWidget}]`).hidden=!0),app.nextWidget=e.dataset.actionId,app.nextWidget!==app.activeWidget?(app.activeWidget=app.nextWidget,document.querySelector(`[data-action-id=${app.nextWidget}]`).active=!0,document.querySelector(`[data-panel-id=${app.nextWidget}]`).hidden=!1):app.activeWidget=null}catch(e){console.log("Error message: ",e.message)}};document.querySelectorAll("calcite-action-bar").forEach(t=>t.addEventListener("click",e)),document.querySelector("calcite-shell").hidden=!1,document.querySelector("calcite-loader").active=!1})});